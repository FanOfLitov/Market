{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\Market\\\\src\\\\components\\\\Productservice\\\\ProductDetails.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport StarRating from '../Shared/StarRating';\nimport StarInput from '../Shared/StarInput';\nimport { formatPrice } from '../../utils/format';\nimport { getProductById, getProductAttachments, PRODUCTS_API } from '../../services/products';\nimport { getProductRating, postReview, getProductReviews } from '../../services/reviews';\nimport { getRolesFromToken } from '../../utils/jwt';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Bar = ({\n  label,\n  value,\n  total\n}) => {\n  const pct = total > 0 ? Math.round(value * 100 / total) : 0;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center gap-2 text-sm\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"w-10 text-gray-600\",\n      children: [label, \"\\u2605\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 bg-gray-200 rounded h-2 overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-yellow-400 h-2\",\n        style: {\n          width: `${pct}%`\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"w-10 text-right text-gray-600\",\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 9\n  }, this);\n};\n_c = Bar;\nconst maskUser = id => id ? `${id.substring(0, 8)}…` : 'Пользователь';\nconst ProductDetails = ({\n  onRequireAuth\n}) => {\n  _s();\n  var _attachments$idx, _attachments$idx2;\n  const requireAuth = typeof onRequireAuth === 'function' ? onRequireAuth : () => alert('Нужно войти');\n  const {\n    uuid\n  } = useParams();\n  const navigate = useNavigate();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState('');\n  const [attachments, setAttachments] = useState([]);\n  const [idx, setIdx] = useState(0);\n  const [avg, setAvg] = useState(0);\n  const [cnt, setCnt] = useState(0);\n  const [b, setB] = useState({\n    b1: 0,\n    b2: 0,\n    b3: 0,\n    b4: 0,\n    b5: 0\n  });\n  const [ratingLoading, setRatingLoading] = useState(false);\n  const [reviews, setReviews] = useState([]);\n  const [reviewsLoading, setReviewsLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [mark, setMark] = useState(0);\n  const [text, setText] = useState('');\n  const [submitLoading, setSubmitLoading] = useState(false);\n  const [submitMsg, setSubmitMsg] = useState('');\n  const token = useMemo(() => localStorage.getItem('jwtToken'), []);\n  const roles = useMemo(() => token ? getRolesFromToken(token) : [], [token]);\n  const isUser = roles.includes('USER') || roles.includes('ROLE_USER');\n  const imageId = ((_attachments$idx = attachments[idx]) === null || _attachments$idx === void 0 ? void 0 : _attachments$idx.gridFsId) || ((_attachments$idx2 = attachments[idx]) === null || _attachments$idx2 === void 0 ? void 0 : _attachments$idx2.id) || attachments[idx] || (product === null || product === void 0 ? void 0 : product.mainAttachmentId);\n  const imgSrc = imageId ? `${PRODUCTS_API}/products/${imageId}/attachments-fs` : null;\n  const PAGE_SIZE = 10;\n  const [rvPage, setRvPage] = useState(0);\n  const [rvHasMore, setRvHasMore] = useState(true);\n  const [rvLoadingMore, setRvLoadingMore] = useState(false);\n  const [sortKey, setSortKey] = useState('positive');\n  const [onlyWithText, setOnlyWithText] = useState(false);\n  const hasCreatedAt = useMemo(() => reviews.some(rv => rv.createdAt), [reviews]);\n  const ts = rv => {\n    const d = rv.createdAt ? new Date(rv.createdAt) : null;\n    return d ? d.getTime() : 0;\n  };\n  const displayedReviews = useMemo(() => {\n    let arr = Array.isArray(reviews) ? [...reviews] : [];\n    if (onlyWithText) arr = arr.filter(rv => (rv.text || '').trim().length > 0);\n    switch (sortKey) {\n      case 'recent':\n        if (hasCreatedAt) {\n          arr.sort((a, b) => ts(b) - ts(a));\n        } else {\n          arr.sort((a, b) => (b.rating || 0) - (a.rating || 0));\n        }\n        break;\n      case 'negative':\n        arr.sort((a, b) => (a.rating || 0) - (b.rating || 0));\n        break;\n      case 'positive':\n      default:\n        arr.sort((a, b) => (b.rating || 0) - (a.rating || 0));\n        break;\n    }\n    return arr;\n  }, [reviews, onlyWithText, sortKey, hasCreatedAt]);\n  const loadMoreReviews = async () => {\n    if (!rvHasMore || rvLoadingMore) return;\n    setRvLoadingMore(true);\n    try {\n      const more = await getProductReviews(uuid, {\n        limit: PAGE_SIZE,\n        offset: rvPage * PAGE_SIZE\n      });\n      setReviews(prev => [...prev, ...more]);\n      setRvPage(p => p + 1);\n      setRvHasMore(more.length === PAGE_SIZE);\n    } finally {\n      setRvLoadingMore(false);\n    }\n  };\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      try {\n        setLoading(true);\n        setErr('');\n        const prod = await getProductById(uuid);\n        if (!alive) return;\n        if (!prod) {\n          setErr('Товар не найден');\n          return;\n        }\n        setProduct(prod);\n\n        // отзывы первая страница\n        setReviewsLoading(true);\n        const pr = await getProductReviews(uuid, {\n          limit: PAGE_SIZE,\n          offset: 0\n        });\n        if (!alive) return;\n        setReviews(pr);\n        setRvPage(1);\n        setRvHasMore(pr.length === PAGE_SIZE);\n        setReviewsLoading(false);\n\n        // вложения + рейтинг\n        const [attRes, ratRes] = await Promise.allSettled([getProductAttachments(uuid), getProductRating(uuid)]);\n        if (!alive) return;\n        if (attRes.status === 'fulfilled') setAttachments(Array.isArray(attRes.value) ? attRes.value : []);\n        if (ratRes.status === 'fulfilled') {\n          var _ref, _data$avg, _ref2, _data$cnt, _data$b, _data$b2, _data$b3, _data$b4, _data$b5;\n          const data = ratRes.value || {};\n          const newAvg = Number((_ref = (_data$avg = data === null || data === void 0 ? void 0 : data.avg) !== null && _data$avg !== void 0 ? _data$avg : data === null || data === void 0 ? void 0 : data.average) !== null && _ref !== void 0 ? _ref : 0);\n          const newCnt = Number((_ref2 = (_data$cnt = data === null || data === void 0 ? void 0 : data.cnt) !== null && _data$cnt !== void 0 ? _data$cnt : data === null || data === void 0 ? void 0 : data.count) !== null && _ref2 !== void 0 ? _ref2 : 0);\n          setAvg(Number.isFinite(newAvg) ? newAvg : 0);\n          setCnt(Number.isFinite(newCnt) ? newCnt : 0);\n          setB({\n            b1: Number((_data$b = data === null || data === void 0 ? void 0 : data.b1) !== null && _data$b !== void 0 ? _data$b : 0),\n            b2: Number((_data$b2 = data === null || data === void 0 ? void 0 : data.b2) !== null && _data$b2 !== void 0 ? _data$b2 : 0),\n            b3: Number((_data$b3 = data === null || data === void 0 ? void 0 : data.b3) !== null && _data$b3 !== void 0 ? _data$b3 : 0),\n            b4: Number((_data$b4 = data === null || data === void 0 ? void 0 : data.b4) !== null && _data$b4 !== void 0 ? _data$b4 : 0),\n            b5: Number((_data$b5 = data === null || data === void 0 ? void 0 : data.b5) !== null && _data$b5 !== void 0 ? _data$b5 : 0)\n          });\n        }\n      } catch {\n        setErr('Ошибка загрузки товара');\n      } finally {\n        setLoading(false);\n        setRatingLoading(false);\n      }\n    })();\n    return () => {\n      alive = false;\n    };\n  }, [uuid]);\n  const handleBuy = () => {\n    if (!token) {\n      requireAuth();\n      return;\n    }\n    // TODO: корзина/заказ\n  };\n  const submitReview = async () => {\n    if (!token) {\n      requireAuth();\n      return;\n    }\n    if (mark < 1 || mark > 5) {\n      setSubmitMsg('Поставьте оценку от 1 до 5');\n      return;\n    }\n    setSubmitLoading(true);\n    setSubmitMsg('');\n    try {\n      const res = await postReview(uuid, {\n        mark,\n        text\n      }, token);\n      if (res.accepted) {\n        setSubmitMsg('Отзыв принят. Рейтинг обновится через несколько секунд.');\n        setTimeout(async () => {\n          try {\n            var _ref3, _r$avg, _ref4, _r$cnt, _r$b, _r$b2, _r$b3, _r$b4, _r$b5;\n            const [r, rv] = await Promise.all([getProductRating(uuid), getProductReviews(uuid, {\n              limit: PAGE_SIZE,\n              offset: 0\n            })]);\n            const newAvg = Number((_ref3 = (_r$avg = r === null || r === void 0 ? void 0 : r.avg) !== null && _r$avg !== void 0 ? _r$avg : r === null || r === void 0 ? void 0 : r.average) !== null && _ref3 !== void 0 ? _ref3 : 0);\n            const newCnt = Number((_ref4 = (_r$cnt = r === null || r === void 0 ? void 0 : r.cnt) !== null && _r$cnt !== void 0 ? _r$cnt : r === null || r === void 0 ? void 0 : r.count) !== null && _ref4 !== void 0 ? _ref4 : 0);\n            setAvg(Number.isFinite(newAvg) ? newAvg : avg);\n            setCnt(Number.isFinite(newCnt) ? newCnt : cnt);\n            setB({\n              b1: Number((_r$b = r === null || r === void 0 ? void 0 : r.b1) !== null && _r$b !== void 0 ? _r$b : 0),\n              b2: Number((_r$b2 = r === null || r === void 0 ? void 0 : r.b2) !== null && _r$b2 !== void 0 ? _r$b2 : 0),\n              b3: Number((_r$b3 = r === null || r === void 0 ? void 0 : r.b3) !== null && _r$b3 !== void 0 ? _r$b3 : 0),\n              b4: Number((_r$b4 = r === null || r === void 0 ? void 0 : r.b4) !== null && _r$b4 !== void 0 ? _r$b4 : 0),\n              b5: Number((_r$b5 = r === null || r === void 0 ? void 0 : r.b5) !== null && _r$b5 !== void 0 ? _r$b5 : 0)\n            });\n            setReviews(Array.isArray(rv) ? rv : []);\n            setRvPage(1);\n            setRvHasMore((rv || []).length === PAGE_SIZE);\n          } catch {}\n        }, 2500);\n      }\n    } catch (e) {\n      setSubmitMsg(e.message === 'UNAUTHORIZED' ? 'Нужно войти' : 'Не удалось отправить отзыв');\n      if (e.message === 'UNAUTHORIZED') requireAuth();\n    } finally {\n      setSubmitLoading(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto p-6\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }, this);\n  }\n  if (err || !product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate(-1),\n        className: \"text-blue-600 hover:underline mb-4\",\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-600\",\n        children: err || 'Товар не найден'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-7xl mx-auto p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => navigate(-1),\n      className: \"text-blue-600 hover:underline mb-4\",\n      children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-12 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-12 lg:col-span-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative aspect-square bg-gray-100 rounded overflow-hidden\",\n          children: [imgSrc ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: imgSrc,\n            alt: product.title,\n            className: \"w-full h-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full h-full flex items-center justify-center text-gray-400\",\n            children: \"\\u041D\\u0435\\u0442 \\u0444\\u043E\\u0442\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 29\n          }, this), attachments.length > 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIdx(i => (i - 1 + attachments.length) % attachments.length),\n              className: \"absolute top-1/2 left-2 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M15 19l-7-7 7-7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 116\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIdx(i => (i + 1) % attachments.length),\n              className: \"absolute top-1/2 right-2 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 5l7 7-7 7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 116\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 21\n        }, this), attachments.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-3 grid grid-cols-5 gap-2\",\n          children: attachments.map((a, i) => {\n            const id = (a === null || a === void 0 ? void 0 : a.gridFsId) || (a === null || a === void 0 ? void 0 : a.id) || a;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIdx(i),\n              className: `aspect-square rounded overflow-hidden border ${i === idx ? 'border-blue-600' : 'border-transparent'}`,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `${PRODUCTS_API}/products/${id}/attachments-fs`,\n                alt: \"\",\n                className: \"w-full h-full object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 41\n              }, this)\n            }, id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-span-12 lg:col-span-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold\",\n          children: product.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(StarRating, {\n            rating: avg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 25\n          }, this), !ratingLoading && cnt > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-sm text-gray-600\",\n            children: [avg.toFixed(1), \" \\xB7 \", cnt, \" \\u043E\\u0442\\u0437\\u044B\\u0432(\\u043E\\u0432)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 55\n          }, this), ratingLoading && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-400\",\n            children: \"\\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u044F\\u0435\\u043C\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 43\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 text-3xl font-semibold\",\n          children: formatPrice(product.price)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-sm text-gray-600\",\n          children: [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441: \", product.stock > 0 ? 'В наличии' : 'Нет в наличии']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-sm text-gray-600\",\n          children: [\"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0432\\u0435\\u0446: \", product.seller_id || product.sellerId || '—']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 flex items-center gap-3\",\n          children: [isUser && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (!token) requireAuth();else {/* TODO */}\n            },\n            className: \"px-5 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white\",\n            children: \"\\u041A\\u0443\\u043F\\u0438\\u0442\\u044C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => navigator.clipboard.writeText(window.location.href),\n            className: \"px-5 py-2 rounded border\",\n            children: \"\\u041F\\u043E\\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold mb-2\",\n            children: \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-700 whitespace-pre-wrap\",\n            children: product.description || '—'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold mb-2\",\n            children: \"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-2 text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: \"UUID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 67\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-mono\",\n                children: uuid\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 110\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: \"\\u041E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 67\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: product.stock\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 113\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-500\",\n                children: \"\\u041F\\u0440\\u043E\\u0434\\u0430\\u0432\\u0435\\u0446\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 67\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-mono\",\n                children: product.seller_id || product.sellerId || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 114\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold mb-2\",\n            children: \"\\u0420\\u0430\\u0441\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0446\\u0435\\u043D\\u043E\\u043A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(Bar, {\n              label: \"5\",\n              value: b.b5,\n              total: cnt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              label: \"4\",\n              value: b.b4,\n              total: cnt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              label: \"3\",\n              value: b.b3,\n              total: cnt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              label: \"2\",\n              value: b.b2,\n              total: cnt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Bar, {\n              label: \"1\",\n              value: b.b1,\n              total: cnt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold mb-2\",\n            children: \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 25\n          }, this), !showForm ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowForm(true),\n            className: \"text-blue-600 hover:underline\",\n            children: \"\\u041D\\u0430\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C \\u043E\\u0442\\u0437\\u044B\\u0432\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-3 border rounded-lg bg-gray-50\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-700\",\n                children: \"\\u0412\\u0430\\u0448\\u0430 \\u043E\\u0446\\u0435\\u043D\\u043A\\u0430:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(StarInput, {\n                value: mark,\n                onChange: setMark\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"mt-2 w-full border rounded-lg p-2 text-sm\",\n              rows: 3,\n              placeholder: \"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439 (\\u043D\\u0435\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E)\",\n              value: text,\n              onChange: e => setText(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: submitReview,\n                disabled: submitLoading || mark < 1,\n                className: \"px-3 py-1.5 rounded bg-blue-600 text-white text-sm disabled:opacity-50\",\n                children: submitLoading ? 'Отправка...' : 'Отправить'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowForm(false),\n                className: \"px-3 py-1.5 rounded border text-sm\",\n                children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 37\n              }, this), submitMsg && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-600\",\n                children: submitMsg\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold mb-2\",\n            children: \"\\u041E\\u0442\\u0437\\u044B\\u0432\\u044B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-wrap items-center gap-3 mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"text-sm text-gray-600\",\n              children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u043A\\u0430:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: sortKey,\n              onChange: e => setSortKey(e.target.value),\n              className: \"text-sm border rounded px-2 py-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"positive\",\n                children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"negative\",\n                children: \"\\u0421\\u043D\\u0430\\u0447\\u0430\\u043B\\u0430 \\u043E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"recent\",\n                disabled: !hasCreatedAt,\n                children: \"\\u041D\\u0435\\u0434\\u0430\\u0432\\u043D\\u0438\\u0435\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"flex items-center gap-2 text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: onlyWithText,\n                onChange: e => setOnlyWithText(e.target.checked)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 33\n              }, this), \"\\u0422\\u043E\\u043B\\u044C\\u043A\\u043E \\u0441 \\u0442\\u0435\\u043A\\u0441\\u0442\\u043E\\u043C\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 25\n          }, this), reviewsLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 44\n          }, this), !reviewsLoading && displayedReviews.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: \"\\u041E\\u0442\\u0437\\u044B\\u0432\\u043E\\u0432 \\u043F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 29\n          }, this), !reviewsLoading && displayedReviews.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"divide-y border rounded-lg\",\n            children: displayedReviews.map(rv => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(StarRating, {\n                    rating: Number(rv.rating || 0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-sm text-gray-600\",\n                    children: Number(rv.rating || 0).toFixed(1)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 358,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-500\",\n                  children: rv.createdAt ? new Date(rv.createdAt).toLocaleString() : ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 41\n              }, this), rv.text && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mt-2 text-sm text-gray-800 whitespace-pre-wrap\",\n                children: rv.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 53\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-1 text-xs text-gray-500\",\n                children: [(rv.userId || '').substring(0, 8), \"\\u2026\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 41\n              }, this)]\n            }, rv.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 29\n          }, this), rvHasMore && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: loadMoreReviews,\n              disabled: rvLoadingMore,\n              className: \"px-3 py-1.5 rounded border text-sm\",\n              children: rvLoadingMore ? 'Загрузка…' : 'Показать ещё'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 9\n  }, this);\n};\n_s(ProductDetails, \"P9/RGKPt79l2WV+g6ov0q0hya5o=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c2 = ProductDetails;\nexport default ProductDetails;\nvar _c, _c2;\n$RefreshReg$(_c, \"Bar\");\n$RefreshReg$(_c2, \"ProductDetails\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useParams","useNavigate","Link","StarRating","StarInput","formatPrice","getProductById","getProductAttachments","PRODUCTS_API","getProductRating","postReview","getProductReviews","getRolesFromToken","jsxDEV","_jsxDEV","Fragment","_Fragment","Bar","label","value","total","pct","Math","round","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","_c","maskUser","id","substring","ProductDetails","onRequireAuth","_s","_attachments$idx","_attachments$idx2","requireAuth","alert","uuid","navigate","product","setProduct","loading","setLoading","err","setErr","attachments","setAttachments","idx","setIdx","avg","setAvg","cnt","setCnt","b","setB","b1","b2","b3","b4","b5","ratingLoading","setRatingLoading","reviews","setReviews","reviewsLoading","setReviewsLoading","showForm","setShowForm","mark","setMark","text","setText","submitLoading","setSubmitLoading","submitMsg","setSubmitMsg","token","localStorage","getItem","roles","isUser","includes","imageId","gridFsId","mainAttachmentId","imgSrc","PAGE_SIZE","rvPage","setRvPage","rvHasMore","setRvHasMore","rvLoadingMore","setRvLoadingMore","sortKey","setSortKey","onlyWithText","setOnlyWithText","hasCreatedAt","some","rv","createdAt","ts","d","Date","getTime","displayedReviews","arr","Array","isArray","filter","trim","length","sort","a","rating","loadMoreReviews","more","limit","offset","prev","p","alive","prod","pr","attRes","ratRes","Promise","allSettled","status","_ref","_data$avg","_ref2","_data$cnt","_data$b","_data$b2","_data$b3","_data$b4","_data$b5","data","newAvg","Number","average","newCnt","count","isFinite","handleBuy","submitReview","res","accepted","setTimeout","_ref3","_r$avg","_ref4","_r$cnt","_r$b","_r$b2","_r$b3","_r$b4","_r$b5","r","all","e","message","onClick","src","alt","title","i","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","map","toFixed","price","stock","seller_id","sellerId","navigator","clipboard","writeText","window","location","href","description","onChange","rows","placeholder","target","disabled","type","checked","toLocaleString","userId","_c2","$RefreshReg$"],"sources":["C:/Users/User/Documents/GitHub/Market/src/components/Productservice/ProductDetails.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport StarRating from '../Shared/StarRating';\r\nimport StarInput from '../Shared/StarInput';\r\nimport { formatPrice } from '../../utils/format';\r\nimport { getProductById, getProductAttachments, PRODUCTS_API } from '../../services/products';\r\nimport { getProductRating, postReview, getProductReviews } from '../../services/reviews';\r\nimport { getRolesFromToken } from '../../utils/jwt';\r\n\r\nconst Bar = ({ label, value, total }) => {\r\n    const pct = total > 0 ? Math.round((value * 100) / total) : 0;\r\n    return (\r\n        <div className=\"flex items-center gap-2 text-sm\">\r\n            <span className=\"w-10 text-gray-600\">{label}★</span>\r\n            <div className=\"flex-1 bg-gray-200 rounded h-2 overflow-hidden\">\r\n                <div className=\"bg-yellow-400 h-2\" style={{ width: `${pct}%` }} />\r\n            </div>\r\n            <span className=\"w-10 text-right text-gray-600\">{value}</span>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst maskUser = (id) => (id ? `${id.substring(0, 8)}…` : 'Пользователь');\r\n\r\nconst ProductDetails = ({ onRequireAuth }) => {\r\n    const requireAuth = (typeof onRequireAuth === 'function') ? onRequireAuth : () => alert('Нужно войти');\r\n    const { uuid } = useParams();\r\n    const navigate = useNavigate();\r\n\r\n    const [product, setProduct] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [err, setErr] = useState('');\r\n\r\n    const [attachments, setAttachments] = useState([]);\r\n    const [idx, setIdx] = useState(0);\r\n\r\n    const [avg, setAvg] = useState(0);\r\n    const [cnt, setCnt] = useState(0);\r\n    const [b, setB] = useState({ b1:0, b2:0, b3:0, b4:0, b5:0 });\r\n    const [ratingLoading, setRatingLoading] = useState(false);\r\n\r\n    const [reviews, setReviews] = useState([]);\r\n    const [reviewsLoading, setReviewsLoading] = useState(false);\r\n\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [mark, setMark] = useState(0);\r\n    const [text, setText] = useState('');\r\n    const [submitLoading, setSubmitLoading] = useState(false);\r\n    const [submitMsg, setSubmitMsg] = useState('');\r\n\r\n    const token = useMemo(() => localStorage.getItem('jwtToken'), []);\r\n    const roles = useMemo(() => (token ? getRolesFromToken(token) : []), [token]);\r\n    const isUser = roles.includes('USER') || roles.includes('ROLE_USER');\r\n\r\n    const imageId = attachments[idx]?.gridFsId || attachments[idx]?.id || attachments[idx] || product?.mainAttachmentId;\r\n    const imgSrc = imageId ? `${PRODUCTS_API}/products/${imageId}/attachments-fs` : null;\r\n\r\n    const PAGE_SIZE = 10;\r\n    const [rvPage, setRvPage] = useState(0);\r\n    const [rvHasMore, setRvHasMore] = useState(true);\r\n    const [rvLoadingMore, setRvLoadingMore] = useState(false);\r\n\r\n    const [sortKey, setSortKey] = useState('positive');\r\n    const [onlyWithText, setOnlyWithText] = useState(false);\r\n\r\n    const hasCreatedAt = useMemo(\r\n        () => reviews.some(rv => rv.createdAt),\r\n        [reviews]\r\n    );\r\n\r\n    const ts = (rv) => {\r\n        const d = rv.createdAt ? new Date(rv.createdAt) : null;\r\n        return d ? d.getTime() : 0;\r\n    };\r\n    const displayedReviews = useMemo(() => {\r\n        let arr = Array.isArray(reviews) ? [...reviews] : [];\r\n        if (onlyWithText) arr = arr.filter(rv => (rv.text || '').trim().length > 0);\r\n\r\n        switch (sortKey) {\r\n            case 'recent':\r\n                if (hasCreatedAt) {\r\n                    arr.sort((a, b) => ts(b) - ts(a));\r\n                } else {\r\n                    arr.sort((a, b) => (b.rating || 0) - (a.rating || 0));\r\n                }\r\n                break;\r\n            case 'negative':\r\n                arr.sort((a, b) => (a.rating || 0) - (b.rating || 0));\r\n                break;\r\n            case 'positive':\r\n            default:\r\n                arr.sort((a, b) => (b.rating || 0) - (a.rating || 0));\r\n                break;\r\n        }\r\n        return arr;\r\n    }, [reviews, onlyWithText, sortKey, hasCreatedAt]);\r\n\r\n    const loadMoreReviews = async () => {\r\n        if (!rvHasMore || rvLoadingMore) return;\r\n        setRvLoadingMore(true);\r\n        try {\r\n            const more = await getProductReviews(uuid, { limit: PAGE_SIZE, offset: rvPage * PAGE_SIZE });\r\n            setReviews(prev => [...prev, ...more]);\r\n            setRvPage(p => p + 1);\r\n            setRvHasMore(more.length === PAGE_SIZE);\r\n        } finally {\r\n            setRvLoadingMore(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        let alive = true;\r\n        (async () => {\r\n            try {\r\n                setLoading(true);\r\n                setErr('');\r\n                const prod = await getProductById(uuid);\r\n                if (!alive) return;\r\n                if (!prod) { setErr('Товар не найден'); return; }\r\n                setProduct(prod);\r\n\r\n                // отзывы первая страница\r\n                setReviewsLoading(true);\r\n                const pr = await getProductReviews(uuid, { limit: PAGE_SIZE, offset: 0 });\r\n                if (!alive) return;\r\n                setReviews(pr);\r\n                setRvPage(1);\r\n                setRvHasMore(pr.length === PAGE_SIZE);\r\n                setReviewsLoading(false);\r\n\r\n                // вложения + рейтинг\r\n                const [attRes, ratRes] = await Promise.allSettled([\r\n                    getProductAttachments(uuid),\r\n                    getProductRating(uuid),\r\n                ]);\r\n                if (!alive) return;\r\n\r\n                if (attRes.status === 'fulfilled') setAttachments(Array.isArray(attRes.value) ? attRes.value : []);\r\n                if (ratRes.status === 'fulfilled') {\r\n                    const data = ratRes.value || {};\r\n                    const newAvg = Number(data?.avg ?? data?.average ?? 0);\r\n                    const newCnt = Number(data?.cnt ?? data?.count ?? 0);\r\n                    setAvg(Number.isFinite(newAvg) ? newAvg : 0);\r\n                    setCnt(Number.isFinite(newCnt) ? newCnt : 0);\r\n                    setB({\r\n                        b1: Number(data?.b1 ?? 0),\r\n                        b2: Number(data?.b2 ?? 0),\r\n                        b3: Number(data?.b3 ?? 0),\r\n                        b4: Number(data?.b4 ?? 0),\r\n                        b5: Number(data?.b5 ?? 0),\r\n                    });\r\n                }\r\n            } catch {\r\n                setErr('Ошибка загрузки товара');\r\n            } finally {\r\n                setLoading(false);\r\n                setRatingLoading(false);\r\n            }\r\n        })();\r\n        return () => { alive = false; };\r\n    }, [uuid]);\r\n\r\n    const handleBuy = () => {\r\n        if (!token) { requireAuth(); return; }\r\n        // TODO: корзина/заказ\r\n    };\r\n\r\n    const submitReview = async () => {\r\n        if (!token) { requireAuth(); return; }\r\n        if (mark < 1 || mark > 5) { setSubmitMsg('Поставьте оценку от 1 до 5'); return; }\r\n        setSubmitLoading(true);\r\n        setSubmitMsg('');\r\n        try {\r\n            const res = await postReview(uuid, { mark, text }, token);\r\n            if (res.accepted) {\r\n                setSubmitMsg('Отзыв принят. Рейтинг обновится через несколько секунд.');\r\n                setTimeout(async () => {\r\n                    try {\r\n                        const [r, rv] = await Promise.all([\r\n                            getProductRating(uuid),\r\n                            getProductReviews(uuid, { limit: PAGE_SIZE, offset: 0 })\r\n                        ]);\r\n                        const newAvg = Number(r?.avg ?? r?.average ?? 0);\r\n                        const newCnt = Number(r?.cnt ?? r?.count ?? 0);\r\n                        setAvg(Number.isFinite(newAvg) ? newAvg : avg);\r\n                        setCnt(Number.isFinite(newCnt) ? newCnt : cnt);\r\n                        setB({\r\n                            b1: Number(r?.b1 ?? 0), b2: Number(r?.b2 ?? 0), b3: Number(r?.b3 ?? 0),\r\n                            b4: Number(r?.b4 ?? 0), b5: Number(r?.b5 ?? 0),\r\n                        });\r\n                        setReviews(Array.isArray(rv) ? rv : []);\r\n                        setRvPage(1);\r\n                        setRvHasMore((rv || []).length === PAGE_SIZE);\r\n                    } catch {}\r\n                }, 2500);\r\n            }\r\n        } catch (e) {\r\n            setSubmitMsg(e.message === 'UNAUTHORIZED' ? 'Нужно войти' : 'Не удалось отправить отзыв');\r\n            if (e.message === 'UNAUTHORIZED') requireAuth();\r\n        } finally {\r\n            setSubmitLoading(false);\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return (<div className=\"max-w-7xl mx-auto p-6\">Загрузка…</div>);\r\n    }\r\n    if (err || !product) {\r\n        return (\r\n            <div className=\"max-w-3xl mx-auto p-6\">\r\n                <button onClick={() => navigate(-1)} className=\"text-blue-600 hover:underline mb-4\">Назад</button>\r\n                <div className=\"text-red-600\">{err || 'Товар не найден'}</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-7xl mx-auto p-6\">\r\n            <button onClick={() => navigate(-1)} className=\"text-blue-600 hover:underline mb-4\">Назад</button>\r\n\r\n            <div className=\"grid grid-cols-12 gap-8\">\r\n                <div className=\"col-span-12 lg:col-span-6\">\r\n                    <div className=\"relative aspect-square bg-gray-100 rounded overflow-hidden\">\r\n                        {imgSrc ? (\r\n                            <img src={imgSrc} alt={product.title} className=\"w-full h-full object-cover\" />\r\n                        ) : (\r\n                            <div className=\"w-full h-full flex items-center justify-center text-gray-400\">Нет фото</div>\r\n                        )}\r\n                        {attachments.length > 1 && (\r\n                            <>\r\n                                <button onClick={() => setIdx(i => (i - 1 + attachments.length) % attachments.length)} className=\"absolute top-1/2 left-2 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow\">\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" /></svg>\r\n                                </button>\r\n                                <button onClick={() => setIdx(i => (i + 1) % attachments.length)} className=\"absolute top-1/2 right-2 -translate-y-1/2 bg-white/80 p-2 rounded-full shadow\">\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" /></svg>\r\n                                </button>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    {attachments.length > 1 && (\r\n                        <div className=\"mt-3 grid grid-cols-5 gap-2\">\r\n                            {attachments.map((a, i) => {\r\n                                const id = a?.gridFsId || a?.id || a;\r\n                                return (\r\n                                    <button key={id} onClick={() => setIdx(i)} className={`aspect-square rounded overflow-hidden border ${i === idx ? 'border-blue-600' : 'border-transparent'}`}>\r\n                                        <img src={`${PRODUCTS_API}/products/${id}/attachments-fs`} alt=\"\" className=\"w-full h-full object-cover\" />\r\n                                    </button>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"col-span-12 lg:col-span-6\">\r\n                    <h1 className=\"text-2xl font-bold\">{product.title}</h1>\r\n\r\n                    <div className=\"mt-2 flex items-center gap-2\">\r\n                        <StarRating rating={avg} />\r\n                        {!ratingLoading && cnt > 0 && <span className=\"text-sm text-gray-600\">{avg.toFixed(1)} · {cnt} отзыв(ов)</span>}\r\n                        {ratingLoading && <span className=\"text-xs text-gray-400\">обновляем…</span>}\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 text-3xl font-semibold\">{formatPrice(product.price)}</div>\r\n                    <div className=\"mt-2 text-sm text-gray-600\">Статус: {product.stock > 0 ? 'В наличии' : 'Нет в наличии'}</div>\r\n                    <div className=\"mt-2 text-sm text-gray-600\">Продавец: {product.seller_id || product.sellerId || '—'}</div>\r\n\r\n                    <div className=\"mt-6 flex items-center gap-3\">\r\n                        {isUser && (\r\n                            <button onClick={() => { if (!token) requireAuth(); else {/* TODO */} }} className=\"px-5 py-2 rounded bg-blue-600 hover:bg-blue-700 text-white\">Купить</button>\r\n                        )}\r\n                        <button onClick={() => navigator.clipboard.writeText(window.location.href)} className=\"px-5 py-2 rounded border\">Поделиться</button>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n                        <h2 className=\"text-lg font-semibold mb-2\">Описание</h2>\r\n                        <p className=\"text-gray-700 whitespace-pre-wrap\">{product.description || '—'}</p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n                        <h2 className=\"text-lg font-semibold mb-2\">Характеристики</h2>\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-2 text-sm\">\r\n                            <div className=\"flex justify-between\"><span className=\"text-gray-500\">UUID</span><span className=\"font-mono\">{uuid}</span></div>\r\n                            <div className=\"flex justify-between\"><span className=\"text-gray-500\">Остаток</span><span>{product.stock}</span></div>\r\n                            <div className=\"flex justify-between\"><span className=\"text-gray-500\">Продавец</span><span className=\"font-mono\">{product.seller_id || product.sellerId || '—'}</span></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n                        <h2 className=\"text-lg font-semibold mb-2\">Распределение оценок</h2>\r\n                        <div className=\"space-y-1\">\r\n                            <Bar label=\"5\" value={b.b5} total={cnt} />\r\n                            <Bar label=\"4\" value={b.b4} total={cnt} />\r\n                            <Bar label=\"3\" value={b.b3} total={cnt} />\r\n                            <Bar label=\"2\" value={b.b2} total={cnt} />\r\n                            <Bar label=\"1\" value={b.b1} total={cnt} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n                        <h2 className=\"text-lg font-semibold mb-2\">Оставить отзыв</h2>\r\n                        {!showForm ? (\r\n                            <button onClick={() => setShowForm(true)} className=\"text-blue-600 hover:underline\">Написать отзыв</button>\r\n                        ) : (\r\n                            <div className=\"p-3 border rounded-lg bg-gray-50\">\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"text-sm text-gray-700\">Ваша оценка:</span>\r\n                                    <StarInput value={mark} onChange={setMark} />\r\n                                </div>\r\n                                <textarea className=\"mt-2 w-full border rounded-lg p-2 text-sm\" rows={3} placeholder=\"Комментарий (необязательно)\" value={text} onChange={(e) => setText(e.target.value)} />\r\n                                <div className=\"mt-2 flex items-center gap-2\">\r\n                                    <button onClick={submitReview} disabled={submitLoading || mark < 1} className=\"px-3 py-1.5 rounded bg-blue-600 text-white text-sm disabled:opacity-50\">\r\n                                        {submitLoading ? 'Отправка...' : 'Отправить'}\r\n                                    </button>\r\n                                    <button onClick={() => setShowForm(false)} className=\"px-3 py-1.5 rounded border text-sm\">Отмена</button>\r\n                                    {submitMsg && <span className=\"text-xs text-gray-600\">{submitMsg}</span>}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"mt-8\">\r\n                        <h2 className=\"text-lg font-semibold mb-2\">Отзывы</h2>\r\n\r\n                        <div className=\"flex flex-wrap items-center gap-3 mb-3\">\r\n                            <label className=\"text-sm text-gray-600\">Сортировка:</label>\r\n                            <select\r\n                                value={sortKey}\r\n                                onChange={(e) => setSortKey(e.target.value)}\r\n                                className=\"text-sm border rounded px-2 py-1\"\r\n                            >\r\n                                <option value=\"positive\">Сначала положительные</option>\r\n                                <option value=\"negative\">Сначала отрицательные</option>\r\n                                <option value=\"recent\" disabled={!hasCreatedAt}>Недавние</option>\r\n                            </select>\r\n\r\n                            <label className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    checked={onlyWithText}\r\n                                    onChange={(e) => setOnlyWithText(e.target.checked)}\r\n                                />\r\n                                Только с текстом\r\n                            </label>\r\n                        </div>\r\n\r\n                        {reviewsLoading && <div className=\"text-sm text-gray-500\">Загрузка отзывов…</div>}\r\n                        {!reviewsLoading && displayedReviews.length === 0 && (\r\n                            <div className=\"text-sm text-gray-500\">Отзывов пока нет</div>\r\n                        )}\r\n\r\n                        {!reviewsLoading && displayedReviews.length > 0 && (\r\n                            <div className=\"divide-y border rounded-lg\">\r\n                                {displayedReviews.map((rv) => (\r\n                                    <div key={rv.id} className=\"p-3\">\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                <StarRating rating={Number(rv.rating || 0)} />\r\n                                                <span className=\"text-sm text-gray-600\">{Number(rv.rating || 0).toFixed(1)}</span>\r\n                                            </div>\r\n                                            <span className=\"text-xs text-gray-500\">\r\n                                                {rv.createdAt ? new Date(rv.createdAt).toLocaleString() : ''}\r\n                                            </span>\r\n                                        </div>\r\n                                        {rv.text && <p className=\"mt-2 text-sm text-gray-800 whitespace-pre-wrap\">{rv.text}</p>}\r\n                                        <div className=\"mt-1 text-xs text-gray-500\">{(rv.userId || '').substring(0, 8)}…</div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n\r\n                        {rvHasMore && (\r\n                            <div className=\"mt-3\">\r\n                                <button\r\n                                    onClick={loadMoreReviews}\r\n                                    disabled={rvLoadingMore}\r\n                                    className=\"px-3 py-1.5 rounded border text-sm\"\r\n                                >\r\n                                    {rvLoadingMore ? 'Загрузка…' : 'Показать ещё'}\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}