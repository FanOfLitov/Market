{"ast":null,"code":"// Добавьте эту строку В САМОМ НАЧАЛЕ файла:\nexport const PRODUCTS_API = process.env.REACT_APP_PRODUCTS_URL || 'http://localhost:8072/productservice/api/v1';\n\n// Затем остальные функции:\nexport const getProductById = async id => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${id}`);\n    if (!response.ok) return null;\n    return await response.json();\n  } catch {\n    return null;\n  }\n};\nexport const getProductAttachments = async id => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${id}/attachments`);\n    if (!response.ok) return [];\n    return await response.json();\n  } catch {\n    return [];\n  }\n};\nexport const getProducts = async () => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products`);\n    if (!response.ok) return [];\n    return await response.json();\n  } catch {\n    return [];\n  }\n};\nexport const createProduct = async (productData, token) => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify(productData)\n    });\n    return await response.json();\n  } catch {\n    return null;\n  }\n};\nexport const updateProduct = async (id, productData, token) => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${id}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      body: JSON.stringify(productData)\n    });\n    return await response.json();\n  } catch {\n    return null;\n  }\n};\nexport const deleteProduct = async (id, token) => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${id}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    return response.ok;\n  } catch {\n    return false;\n  }\n};\nexport const uploadAttachment = async (productId, file, token) => {\n  const formData = new FormData();\n  formData.append('file', file);\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments`, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      },\n      body: formData\n    });\n    return await response.json();\n  } catch {\n    return null;\n  }\n};\nexport const setMainAttachment = async (productId, attachmentId, token) => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}/main`, {\n      method: 'PUT',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    return response.ok;\n  } catch {\n    return false;\n  }\n};\nexport const deleteAttachment = async (productId, attachmentId, token) => {\n  try {\n    const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}`, {\n      method: 'DELETE',\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    return response.ok;\n  } catch {\n    return false;\n  }\n};\n\n//import { apiFetch } from './api';\n//\n//const PRODUCTS_API = process.env.REACT_APP_PRODUCTS_URL || 'http://localhost:8072/productservice/api/v1';\n//\n//export const getProducts = async (params = {}) => {\n//    const queryParams = new URLSearchParams(params).toString();\n//    const url = `${PRODUCTS_API}/products${queryParams ? `?${queryParams}` : ''}`;\n//    return apiFetch(url);\n//};\n//\n//export const getProductById = async (id) => {\n//    return apiFetch(`${PRODUCTS_API}/products/${id}`);\n//};\n//\n//export const createProduct = async (productData) => {\n//    return apiFetch(`${PRODUCTS_API}/products`, {\n//        method: 'POST',\n//        body: JSON.stringify(productData),\n//    });\n//};\n//\n//export const updateProduct = async (id, productData) => {\n//    return apiFetch(`${PRODUCTS_API}/products/${id}`, {\n//        method: 'PATCH',\n//        body: JSON.stringify(productData),\n//    });\n//};\n//\n//export const deleteProduct = async (id) => {\n//    return apiFetch(`${PRODUCTS_API}/products/${id}`, {\n//        method: 'DELETE',\n//    });\n//};\n//\n//export const getProductAttachments = async (productId) => {\n//    return apiFetch(`${PRODUCTS_API}/products/${productId}/attachments`);\n//};\n//\n//export const uploadAttachment = async (productId, file) => {\n//    const formData = new FormData();\n//    formData.append('file', file);\n//\n//    const token = localStorage.getItem('jwtToken');\n//    const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments`, {\n//        method: 'POST',\n//        headers: {\n//            'Authorization': `Bearer ${token}`,\n//        },\n//        body: formData,\n//    });\n//\n//    if (!response.ok) {\n//        throw new Error('Upload failed');\n//    }\n//\n//    return response.json();\n//};\n//\n//export const deleteAttachment = async (productId, attachmentId) => {\n//    return apiFetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}`, {\n//        method: 'DELETE',\n//    });\n//};\n//\n//export const setMainAttachment = async (productId, attachmentId) => {\n//    return apiFetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}/set-main`, {\n//        method: 'PATCH',\n//    });\n//};","map":{"version":3,"names":["PRODUCTS_API","process","env","REACT_APP_PRODUCTS_URL","getProductById","id","response","fetch","ok","json","getProductAttachments","getProducts","createProduct","productData","token","method","headers","body","JSON","stringify","updateProduct","deleteProduct","uploadAttachment","productId","file","formData","FormData","append","setMainAttachment","attachmentId","deleteAttachment"],"sources":["C:/Users/User/Documents/GitHub/Market/src/services/products.js"],"sourcesContent":["// Добавьте эту строку В САМОМ НАЧАЛЕ файла:\r\nexport const PRODUCTS_API = process.env.REACT_APP_PRODUCTS_URL || 'http://localhost:8072/productservice/api/v1';\r\n\r\n// Затем остальные функции:\r\nexport const getProductById = async (id) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${id}`);\r\n        if (!response.ok) return null;\r\n        return await response.json();\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const getProductAttachments = async (id) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${id}/attachments`);\r\n        if (!response.ok) return [];\r\n        return await response.json();\r\n    } catch {\r\n        return [];\r\n    }\r\n};\r\n\r\nexport const getProducts = async () => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products`);\r\n        if (!response.ok) return [];\r\n        return await response.json();\r\n    } catch {\r\n        return [];\r\n    }\r\n};\r\n\r\nexport const createProduct = async (productData, token) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify(productData)\r\n        });\r\n        return await response.json();\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const updateProduct = async (id, productData, token) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n            body: JSON.stringify(productData)\r\n        });\r\n        return await response.json();\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const deleteProduct = async (id, token) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        });\r\n        return response.ok;\r\n    } catch {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const uploadAttachment = async (productId, file, token) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            },\r\n            body: formData\r\n        });\r\n        return await response.json();\r\n    } catch {\r\n        return null;\r\n    }\r\n};\r\n\r\nexport const setMainAttachment = async (productId, attachmentId, token) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}/main`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        });\r\n        return response.ok;\r\n    } catch {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const deleteAttachment = async (productId, attachmentId, token) => {\r\n    try {\r\n        const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${token}`\r\n            }\r\n        });\r\n        return response.ok;\r\n    } catch {\r\n        return false;\r\n    }\r\n};\r\n\r\n//import { apiFetch } from './api';\r\n//\r\n//const PRODUCTS_API = process.env.REACT_APP_PRODUCTS_URL || 'http://localhost:8072/productservice/api/v1';\r\n//\r\n//export const getProducts = async (params = {}) => {\r\n//    const queryParams = new URLSearchParams(params).toString();\r\n//    const url = `${PRODUCTS_API}/products${queryParams ? `?${queryParams}` : ''}`;\r\n//    return apiFetch(url);\r\n//};\r\n//\r\n//export const getProductById = async (id) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products/${id}`);\r\n//};\r\n//\r\n//export const createProduct = async (productData) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products`, {\r\n//        method: 'POST',\r\n//        body: JSON.stringify(productData),\r\n//    });\r\n//};\r\n//\r\n//export const updateProduct = async (id, productData) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products/${id}`, {\r\n//        method: 'PATCH',\r\n//        body: JSON.stringify(productData),\r\n//    });\r\n//};\r\n//\r\n//export const deleteProduct = async (id) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products/${id}`, {\r\n//        method: 'DELETE',\r\n//    });\r\n//};\r\n//\r\n//export const getProductAttachments = async (productId) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products/${productId}/attachments`);\r\n//};\r\n//\r\n//export const uploadAttachment = async (productId, file) => {\r\n//    const formData = new FormData();\r\n//    formData.append('file', file);\r\n//\r\n//    const token = localStorage.getItem('jwtToken');\r\n//    const response = await fetch(`${PRODUCTS_API}/products/${productId}/attachments`, {\r\n//        method: 'POST',\r\n//        headers: {\r\n//            'Authorization': `Bearer ${token}`,\r\n//        },\r\n//        body: formData,\r\n//    });\r\n//\r\n//    if (!response.ok) {\r\n//        throw new Error('Upload failed');\r\n//    }\r\n//\r\n//    return response.json();\r\n//};\r\n//\r\n//export const deleteAttachment = async (productId, attachmentId) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}`, {\r\n//        method: 'DELETE',\r\n//    });\r\n//};\r\n//\r\n//export const setMainAttachment = async (productId, attachmentId) => {\r\n//    return apiFetch(`${PRODUCTS_API}/products/${productId}/attachments/${attachmentId}/set-main`, {\r\n//        method: 'PATCH',\r\n//    });\r\n//};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}